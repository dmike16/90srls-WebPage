/* 90srlsWebPage 2015-10-18 */!function(){"use strict";new UtilityBuild(["dmUtil","dmPaper"],function(a){function b(){this.previewScroll=this.lastScroll,this.lastScroll=window.scrollY||window.pageYOffset,this._requestTick()}function c(){var b=this.px;b.innerHeight=a.global.innerHeight,b.innerWidth=a.global.innerWidth,b.calculate(),this._requestTick()}function d(){this.ticking||(this.ticking=!0,a.animatedFrame.request(this._update))}function e(){this.update(),this.ticking=!1}function f(a){for(var b=a.length,c=0;b>c;c++)p(a[c]).add("active")}function g(a,b,c){var d=null!==a.getAttribute(b)?!0:!1,e=d?c!==!0&&"removeAttribute":c!==!1&&"setAttribute";return e&&a[e](b,""),c===!0||c===!1?c:!d}function h(b){b.preventDefault(),b.stopPropagation(),p(a.doc.documentElement).add("mask-disable-scroll"),p(w).add("hidden"),p(v).add("active")}function i(b){p(a.doc.documentElement).remove("mask-disable-scroll"),p(v).remove("active"),p(w).remove("hidden")}function j(b,c,d,e){var f=b;if(e){if(!a.ArrayUtility.isArray(e))throw new Error("The 4th parameter must be an Array of string:['webkit',moz,...]");for(var g="",h=c.replace(/^[a-z]/,function(a){return a.toUpperCase()}),i=0,j=e.length;j>i;i++)"string"==typeof e[i]&&(g=e[i]+h,f.style[g]=d)}f.style[c]=d}function k(a){return this instanceof k?void(this.$=t(a)):new k(a)}function l(a){return this instanceof l?void(this.$=t(a)):new l(items)}function m(b){return this instanceof m?(this.$={slideControl:b.querySelector(".slide-control"),a:t(b.querySelectorAll("ul li .slides-pagination-link"))},this.items=new k(b.querySelectorAll(".slide-control .slides-item")),this.pagination=new l(b.querySelectorAll("ul li")),this.items.fitSlide(1,980),this._id={active:0,fit:1},this.frame=a.AnimateObject(),this.frame.step=function c(a){var b=c.a*(1-a),d=c.ele;d.style.webkitTransform="matrix(1,0,0,1,"+b+",0)",d.style.transform="matrix(1,0,0,1,"+b+",0)"},this.frame.step.a=-980,this.frame.step.ele=this.$.slideControl,void(this.frame.id=0)):new m(ele)}var n=a.doc.querySelector.bind(a.doc),o=a.doc.querySelectorAll.bind(a.doc),p=a.ClassList,q=a.EventUtility.aboutHandler.addListener,r=a.EventUtility.aboutHandler.removeListener,s=a.Class.Interface,t=a.ArrayUtility.collectionToArray,u=(n("div.mask-modal"),n(".section-base .photo-crop")),v=n("#PhotoSphere"),w=n(".picture-frame"),x=null,y=null,z=null,A={$:{view:a.global,body:a.doc.body,catalogServices:t(o("#catalog .mobile-is-hidden .service-title-0")),arrowHint:n(".section-intro .arrow-hint")},lastScroll:0,previewScroll:0,_allActive:!1,firstScroll:!1,ticking:!1,tirth:!1,update:function(){if(this.parallax.state){var a=this.lastScroll,b=this.px.innerHeight,c=this.$.sectionIntro;if(a>0){if(this.firstScroll||(this.firstScroll=!0,this.handleDynamicElement()),a>=b&&!c.hide?(c.style.display="none",c.hide=!0,null!==u&&this.$.body.dispatchEvent(new Event("scrolledIntroPage"))):b>a&&c.hide&&(c.style.display="block",c.hide=!1),!this._allActive){var d=this.px.pages[0],e=this.px.pages[1];a>=d&&!this.$._cacheStatusEle.catalogServices&&this.activeElementWhenScrolledToLim("catalogServices",d,f),a>=e&&!this.$._cacheStatusEle.location&&this.activeElementWhenScrolledToLim("location",e,f)}}else this.firstScroll=!1,this.handleDynamicElement(),c.hide&&(c.style.display="block",c.hide=!1);this.parallax.core(7,-a,this.$.sectionPhoto),this.parallax.core(3,-a,this.$.sectionGridOuter,176)}},handleDynamicElement:function(){var a=this.firstScroll,b=this.$,c=p(b.body);c.contains("mobile")||c.toggle("scrolling",a),p(b.arrowHint).toggle("deactive",a)},activeElementWhenScrolledToLim:function(a,b,c){if(this.lastScroll>b){var d=this.$[a];c(d);var e=this.$._cacheStatusEle,f="";e[a]=!0;for(f in e)if(e.hasOwnProperty(f)&&!e[f])break;this._allActive=e[f]}},init:function(){this._update=e.bind(this),this._requestTick=d.bind(this),this.scroll=b.bind(this),this.scroll(),q(this.$.view,"scroll",this.scroll,!1),delete this.init}},B={$:{sectionIntro:n("section"),sectionGridOuter:n(".section-intro .primary-block"),sectionPhoto:n(".section-intro .section-photo"),location:[n("#location .map")],_cacheStatusEle:{catalogServices:!1,location:!1},body:a.doc.body},px:{innerHeight:a.global.innerHeight,innerWidth:a.global.innerWidth,pages:[],calculate:function(){var a=.8,b=650;this.pages[0]=(this.innerHeight+b)*a,this.pages[1]=.9*(this.innerHeight+2*b)}},parallax:{state:!0,core:function(a,b,c){var d=b/a;if(c.style.transform="translate3d(0px,"+d+"px,0px)",arguments[3]){var e=1+b/arguments[3];c.style.opacity=e+""}}},ticking:!1,desktopResize:function(){var a=this.px,b=a.innerHeight,c=b+"px",d=a.innerWidth,e=this.$;if(e.body.style.paddingTop=c,e.sectionIntro.style.height=c,781>=d){var g=p(e.body);g.contains("scrolling")&&(g.remove("scrolling"),this.parallax.core(1,0,this.$.sectionPhoto),this.parallax.core(1,0,this.$.sectionGridOuter,1),e.sectionIntro.style.display="block"),g.add("mobile"),f(e.location),e._cacheStatusEle.location=!0,this.parallax.state=!1,x=x||n("#tourInside"),y=y||n("#closeTour"),z=z||new m(n("#catalog .tab-list")),z.active(),q(x,"click",h),q(y,"click",i),this.update=this.mobileResize}},mobileResize:function(){var a=this.px,b=a.innerWidth,c=a.innerHeight+"px",d=this.$;if(d.body.style.paddingTop=c,d.sectionIntro.style.height=c,b>781)p(this.$.body).remove("mobile"),this.parallax.state=!0,r(x,h),r(y,i),x=null,y=null,z.deactive(),this.update=this.desktopResize;else{var e=z.$.slideControl.getBoundingClientRect();z._ctx.width=e.width,z._ctx.height=e.height,z._ctx.slope=e.width/2}},init:function(){this._update=e.bind(this),this._requestTick=d.bind(this),this.resize=c.bind(this),this.update=this.desktopResize,this.resize(),q(a.global,"resize",this.resize),delete this.init}},C=n("#dropdown-toggle"),D=n(".dropdown-panel");D.openPanel=function(){this.setAttribute("open",""),this.open="open"},C&&q(C,"click",function(a){D.openPanel()}),A=a.Class.extendByCopy(B,A,["$","px","parallax"]);var E=n("#app-bar");E.$={search:n("#app-bar .search")},E.searchOn=!1,E.toggleSearch=function(a){var b=a.target.getAttribute("id");if("search-google"!==b&&"reset-button"!==b){E.searchOn=E.searchOn?!1:!0,p(this).toggle("search-on",E.searchOn),g(this.$.search,"show",E.searchOn);var c=this.$.search.querySelector("#search-google");E.searchOn?c.focus():c.blur()}},E&&q(E.$.search,"click",function(a){E.toggleSearch(a)});var F=o(".paper-fab")[1];F.clicked=!1,q(F,"click",function(a){var b=a.currentTarget;b.clicked?(p(b).remove("pressed"),p(v).remove("active"),p(w).remove("hidden"),b.clicked=!1):(p(b).add("pressed"),p(w).add("hidden"),p(v).add("active"),b.clicked=!0)}),F=null;new s("Slides",["slideON","slideOFF","fitSlide","fitSlideOff","fitPlusSlide"]);k.prototype={slideON:function(a){var b=this.$,c="matrix(1,0,0,1,0,0)",d="10";b[a].style.zIndex=d,b[a].style.webkitTransform=c,b[a].style.transform=c},slideOFF:function(a){var b=this.$,c="0",d="0";b[a].style.opacity=c,b[a].style.zIndex=d},fitSlide:function(a,b){var c=this.$,d="1",e="matrix(1,0,0,1,"+b+",0)";c[a].style.opacity=d,c[a].style.webkitTransform=e,c[a].style.transform=e},fitSlideOff:function(a){var b=this.$,c="0",d="matrix(1,0,0,1,0,0)";b[a].style.opacity=c,b[a].style.webkitTransform=d},fitPlusSlide:function(a){this.fitSlide(a),this.slideON(a)}},l.prototype={slideON:function(a){p(this.$[a]).add("active")},slideOFF:function(a){p(this.$[a]).remove("active")},fitSlide:function(a){},fitSlideOff:function(a){},fitPlusSlide:function(a){}},m.prototype={events:a.EventUtility.touchEvent,active:function(){var a=this.$.a,b=this.$.slideControl;this._currentPos=0,this._click=this.click.bind(this),this._gestureStart=this.gestureStart().bind(this),this._gestureEnd=this.gestureEnd().bind(this),this._gestureMove=this.gestureMove.bind(this);var c=b.getBoundingClientRect();this._ctx={width:c.width,height:c.height,slope:c.width/2};for(var d=a.length-1;d>=0;d--)q(a[d],"click",this._click);q(b,this.events.start,this._gestureStart),this.events.touchSupport&&(q(b,this.events.move,this._gestureMove),q(b,this.events.end,this._gestureEnd),q(b,this.events.cancel,this._gestureEnd))},deactive:function(){for(var a=this.$.a,b=this.$.slideControl,c=a.length-1;c>=0;c--)r(a[c],"click",this._click);r(b,this.events.start,this._gestureStart),this.events.touchSupport&&(r(b,this.events.move,this._gestureMove),r(b,this.events.end,this._gestureEnd),r(b,this.events.cancel,this._gestureEnd)),this._click=null,this._gestureStart=null,this._gestureMove=null,this._gestureEnd=null,this._currentPos=null,this._ctx=null,delete this._click,delete this._gestureStart,delete this._gestureMove,delete this._gestureEnd,delete this._currentPos,delete this._ctx},click:function(a){a.preventDefault();var b=a.target,c=parseInt(b.getAttribute("data-item")),d=this._id.active,e=this._id.fit;c!==d&&this.changeState(d,e,c-d)},gestureStart:function G(a){var G;return G=this.events.touchSupport?function(a){a.touches&&a.touches.length>1||(this._initialPos||(this._initialPos=this.getPointFromEvent(a)),this._onMovingAnim||(this._onMovingAnim=this.onMovingAnim.bind(this)))}:function(a){if(!(a.touches&&a.touches.length>1)){this._initialPos||(this._initialPos=this.getPointFromEvent(a)),this._onMovingAnim||(this._onMovingAnim=this.onMovingAnim.bind(this));var b=this.$.slideControl;q(b,this.events.move,this._gestureMove),q(b,this.events.end,this._gestureEnd),q(b,this.events.cancel,this._gestureEnd)}}},gestureEnd:function H(a){var H;return H=this.events.touchSupport?function(a){a.touches&&a.touches.length>0||(this.updatePosition(),this._initialPos=null,this._onMovingAnim=null,this._lastPos=null,this._isAnimating=!1)}:function(a){if(!(a.touches&&a.touches.length>0)){var b=this.$.slideControl;r(b,this.events.move,this._gestureMove),r(b,this.events.end,this._gestureEnd),r(b,this.events.cancel,this._gestureEnd),this.updatePosition(),this._initialPos=null,this._onMovingAnim=null,this._lastPos=null,this._isAnimating=!1}}},gestureMove:function(b){this._lastPos=this.getPointFromEvent(b),this._isAnimating||(this._isAnimating=!0,a.animatedFrame.request(this._onMovingAnim))},getPointFromEvent:function(a){var b={};return a.targetTouches?(b.x=a.targetTouches[0].clientX,b.y=a.targetTouches[0].clientY):(b.x=a.clientX,b.y=a.clientY),b},onMovingAnim:function(){if(this._isAnimating){var a=this._initialPos.x-this._lastPos.x,b=this._currentPos-a,c="matrix(1,0,0,1,"+b+",0)";j(this.$.slideControl,"transform",c,["webkit"]),this._isAnimating=!1}},updatePosition:function(){if(this._lastPos){var a=this._id.active,b=this._id.fit,c=this._initialPos.x-this._lastPos.x,d=0===c?c:c/Math.abs(c);if(Math.abs(c)>this._ctx.slope)this.changeState(a,b,d);else{var e="matrix(1,0,0,1,0,0)";j(this.$.slideControl,"transform",e,["webkit"])}}},changeState:function(b,c,d){var e=this.items,f=this.pagination;a.animatedFrame.cancel(this.frame.id),this.frame.step.a=980*(d/Math.abs(d)),this.frame.startAnimate(),e.slideOFF(b),f.slideOFF(b),b+=d,b=this.checkBoundary(b),b===c?e.slideON(b):(e.fitPlusSlide(b),e.fitSlideOff(c)),f.slideON(b),c=b+1,c=this.checkBoundary(c),e.fitSlide(c,980),this._id.active=b,this._id.fit=c},checkBoundary:function(a){return a>=this.items.$.length?a=0:0>a&&(a=this.items.$.length-1),a}},q(a.doc.body,"scrolledIntroPage",function(a){q(u,"transitionend",function b(a){var c=a.currentTarget.querySelector(".paper-fab[dynamic]");p(c).add("active"),r(a.currentTarget,"transitionend",b,!1)}),p(u).add("come-in"),u=null,a.stopPropagation()}),q(a.doc,"click",function(a){D.open&&(D.removeAttribute(D.open),D.open=null),E.searchOn&&E.toggleSearch(a)},!0),B.init(),A.init(),C=null,a.PaperMaker("button",{element:o(".paper-fab")[0]}),a.PaperMaker.MakePaperLive()})}();